<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Day of the Week Predictor</title>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 30px;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
        }

        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #7f8c8d;
            font-size: 1.1rem;
        }

        .card {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            padding: 20px;
            margin-bottom: 20px;
        }

        .card-title {
            font-size: 1.2rem;
            font-weight: 500;
            margin-bottom: 15px;
            color: #2c3e50;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }

        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 768px) {
            .grid {
                grid-template-columns: 1fr;
            }
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }

        input,
        select,
        button {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }

        button {
            background-color: #3498db;
            color: white;
            border: none;
            cursor: pointer;
            font-weight: 500;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #2980b9;
        }

        button:disabled {
            background-color: #95a5a6;
            cursor: not-allowed;
        }

        .btn-secondary {
            background-color: #2ecc71;
        }

        .btn-secondary:hover {
            background-color: #27ae60;
        }

        .btn-danger {
            background-color: #e74c3c;
        }

        .btn-danger:hover {
            background-color: #c0392b;
        }

        .progress-container {
            margin-top: 20px;
        }

        .progress-bar {
            height: 20px;
            background-color: #ecf0f1;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background-color: #3498db;
            width: 0%;
            transition: width 0.3s;
        }

        .progress-text {
            text-align: center;
            margin-top: 5px;
            font-size: 0.9rem;
            color: #7f8c8d;
        }

        .result {
            padding: 15px;
            border-radius: 4px;
            margin-top: 15px;
            font-weight: 500;
        }

        .result-success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .result-error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .result-info {
            background-color: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        .chart-container {
            position: relative;
            height: 300px;
            margin-top: 20px;
        }

        .metrics {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .metric {
            text-align: center;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 4px;
        }

        .metric-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: #3498db;
        }

        .metric-label {
            font-size: 0.9rem;
            color: #7f8c8d;
        }

        .tabs {
            display: flex;
            margin-bottom: 15px;
            border-bottom: 1px solid #ddd;
        }

        .tab {
            padding: 10px 15px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.3s;
        }

        .tab.active {
            border-bottom: 2px solid #3498db;
            color: #3498db;
            font-weight: 500;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .training-example {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            border-bottom: 1px solid #eee;
        }

        .training-example:last-child {
            border-bottom: none;
        }

        .confidence-bar {
            height: 10px;
            background-color: #ecf0f1;
            border-radius: 5px;
            margin-top: 5px;
            overflow: hidden;
        }

        .confidence {
            height: 100%;
            background-color: #2ecc71;
        }

        .info-box {
            background-color: #e8f4fc;
            border-left: 4px solid #3498db;
            padding: 15px;
            margin-bottom: 20px;
        }

        .info-box p {
            margin-bottom: 10px;
        }

        .info-box p:last-child {
            margin-bottom: 0;
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1>Day of the Week Predictor</h1>
            <p class="subtitle">Train a neural network to predict the day of the week from any date</p>
        </header>

        <div class="info-box">
            <p>This educational tool demonstrates how a neural network can learn to predict the day of the week for any
                given date. While this is a deterministic problem that can be solved with algorithms (like Zeller's
                Congruence), we'll use machine learning to show how a model can learn these patterns.</p>
            <p>The model will be trained on randomly generated dates and their corresponding days of the week. After
                training, you can test it with any date to see how accurately it can predict the day!</p>
        </div>

        <div class="grid">
            <div>
                <div class="card">
                    <h2 class="card-title">Model Configuration</h2>
                    <div class="form-group">
                        <label for="modelType">Model Architecture</label>
                        <select id="modelType">
                            <option value="simple">Simple Neural Network (1 hidden layer)</option>
                            <option value="medium">Medium Neural Network (2 hidden layers)</option>
                            <option value="complex">Complex Neural Network (3 hidden layers)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="epochs">Training Epochs</label>
                        <input type="number" id="epochs" min="10" max="200" value="50">
                    </div>
                    <div class="form-group">
                        <label for="batchSize">Batch Size</label>
                        <input type="number" id="batchSize" min="10" max="200" value="32">
                    </div>
                    <div class="form-group">
                        <label for="learningRate">Learning Rate</label>
                        <input type="number" id="learningRate" min="0.001" max="0.1" step="0.001" value="0.01">
                    </div>
                    <button id="generateDataBtn" class="btn-secondary">Generate Training Data</button>
                    <button id="trainModelBtn" disabled>Train Model</button>
                </div>

                <div class="card">
                    <h2 class="card-title">Prediction</h2>
                    <div class="form-group">
                        <label for="dateInput">Enter a Date</label>
                        <input type="date" id="dateInput">
                    </div>
                    <button id="predictBtn" disabled>Predict Day of Week</button>
                    <div id="predictionResult"></div>
                </div>
            </div>

            <div>
                <div class="card">
                    <h2 class="card-title">Training Progress</h2>
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div id="trainingProgress" class="progress"></div>
                        </div>
                        <div id="progressText" class="progress-text">Ready to train</div>
                    </div>
                    <div class="metrics">
                        <div class="metric">
                            <div id="trainLoss" class="metric-value">-</div>
                            <div class="metric-label">Training Loss</div>
                        </div>
                        <div class="metric">
                            <div id="valLoss" class="metric-value">-</div>
                            <div class="metric-label">Validation Loss</div>
                        </div>
                        <div class="metric">
                            <div id="accuracy" class="metric-value">-</div>
                            <div class="metric-label">Accuracy (%)</div>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="trainingChart"></canvas>
                    </div>
                </div>

                <div class="card">
                    <h2 class="card-title">Custom Training Examples</h2>
                    <div class="form-group">
                        <label for="customDate">Date</label>
                        <input type="date" id="customDate">
                    </div>
                    <div class="form-group">
                        <label for="customDay">Day of Week</label>
                        <select id="customDay">
                            <option value="0">Sunday</option>
                            <option value="1">Monday</option>
                            <option value="2">Tuesday</option>
                            <option value="3">Wednesday</option>
                            <option value="4">Thursday</option>
                            <option value="5">Friday</option>
                            <option value="6">Saturday</option>
                        </select>
                    </div>
                    <button id="addExampleBtn" class="btn-secondary">Add Example</button>
                    <button id="clearExamplesBtn" class="btn-danger">Clear Examples</button>
                    <div id="customExamplesList" style="max-height: 200px; overflow-y: auto; margin-top: 15px;"></div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2 class="card-title">Model Information</h2>
            <div class="tabs">
                <div class="tab active" data-tab="overview">Overview</div>
                <div class="tab" data-tab="architecture">Architecture</div>
                <div class="tab" data-tab="performance">Performance</div>
            </div>
            <div id="overview" class="tab-content active">
                <p>This application uses TensorFlow.js to create a neural network that learns to predict the day of the
                    week from a given date. The model takes normalized date components (year, month, day) as input and
                    outputs a probability distribution over the seven days of the week.</p>
                <p>While this problem can be solved deterministically using algorithms like Zeller's Congruence, this
                    neural network learns the patterns through training data, demonstrating how machine learning can
                    approximate mathematical functions.</p>
            </div>
            <div id="architecture" class="tab-content">
                <p>The neural network architecture can be customized with different levels of complexity:</p>
                <ul>
                    <li><strong>Simple:</strong> Input layer → 1 hidden layer (16 neurons) → Output layer (7 neurons)
                    </li>
                    <li><strong>Medium:</strong> Input layer → 2 hidden layers (32 and 16 neurons) → Output layer (7
                        neurons)</li>
                    <li><strong>Complex:</strong> Input layer → 3 hidden layers (64, 32, and 16 neurons) → Output layer
                        (7 neurons)</li>
                </ul>
                <p>All hidden layers use ReLU activation, and the output layer uses softmax activation to produce a
                    probability distribution.</p>
            </div>
            <div id="performance" class="tab-content">
                <p>Model performance is evaluated using categorical cross-entropy loss and accuracy metrics. The
                    training progress is visualized to show how the model improves over time.</p>
                <p>The model typically achieves high accuracy (>95%) on this problem, as the relationship between dates
                    and days of the week follows a consistent pattern that can be learned effectively.</p>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let model = null;
        let trainingData = {
            inputs: [],
            outputs: []
        };
        let validationData = {
            inputs: [],
            outputs: []
        };
        let customExamples = [];
        let trainingChart = null;
        let isTraining = false;

        // Days of the week
        const daysOfWeek = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];

        // Initialize the application
        document.addEventListener('DOMContentLoaded', () => {
            initializeChart();
            setupEventListeners();
            setDefaultDate();
        });

        // Set default date to today
        function setDefaultDate() {
            const today = new Date();
            const formattedDate = today.toISOString().split('T')[0];
            document.getElementById('dateInput').value = formattedDate;
            document.getElementById('customDate').value = formattedDate;
        }

        // Setup event listeners
        function setupEventListeners() {
            document.getElementById('generateDataBtn').addEventListener('click', generateTrainingData);
            document.getElementById('trainModelBtn').addEventListener('click', trainModel);
            document.getElementById('predictBtn').addEventListener('click', predictDayOfWeek);
            document.getElementById('addExampleBtn').addEventListener('click', addCustomExample);
            document.getElementById('clearExamplesBtn').addEventListener('click', clearCustomExamples);

            // Tab switching
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.getAttribute('data-tab');
                    switchTab(tabId);
                });
            });
        }

        // Switch tabs
        function switchTab(tabId) {
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });

            document.querySelector(`[data-tab="${tabId}"]`).classList.add('active');
            document.getElementById(tabId).classList.add('active');
        }

        // Initialize the training chart
        function initializeChart() {
            const ctx = document.getElementById('trainingChart').getContext('2d');
            trainingChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [
                        {
                            label: 'Training Loss',
                            data: [],
                            borderColor: '#3498db',
                            backgroundColor: 'rgba(52, 152, 219, 0.1)',
                            fill: true,
                            tension: 0.4
                        },
                        {
                            label: 'Validation Loss',
                            data: [],
                            borderColor: '#e74c3c',
                            backgroundColor: 'rgba(231, 76, 60, 0.1)',
                            fill: true,
                            tension: 0.4
                        },
                        {
                            label: 'Accuracy',
                            data: [],
                            borderColor: '#2ecc71',
                            backgroundColor: 'rgba(46, 204, 113, 0.1)',
                            fill: true,
                            tension: 0.4,
                            yAxisID: 'y1'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Loss'
                            }
                        },
                        y1: {
                            beginAtZero: true,
                            position: 'right',
                            title: {
                                display: true,
                                text: 'Accuracy (%)'
                            },
                            grid: {
                                drawOnChartArea: false
                            },
                            min: 0,
                            max: 100
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top'
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false
                        }
                    }
                }
            });
        }

        // Generate training data
        // Enhanced data generation function
        function generateTrainingData() {
            const numExamples = 2000;
            const startDate = new Date(1990, 0, 1);
            const endDate = new Date(2030, 11, 31);

            trainingData = {
                inputs: [],
                outputs: []
            };

            validationData = {
                inputs: [],
                outputs: []
            };

            // Generate random dates
            for (let i = 0; i < numExamples; i++) {
                const randomDate = new Date(startDate.getTime() + Math.random() * (endDate.getTime() - startDate.getTime()));
                const year = randomDate.getFullYear();
                const month = randomDate.getMonth() + 1; // 1-12
                const day = randomDate.getDate(); // 1-31

                // Enhanced feature engineering
                const features = extractDateFeatures(year, month, day);

                // Get day of week (0-6)
                const dayOfWeek = randomDate.getDay();

                // Create one-hot encoding for the output
                const oneHotOutput = new Array(7).fill(0);
                oneHotOutput[dayOfWeek] = 1;

                // Split into training (80%) and validation (20%) sets
                if (i < numExamples * 0.8) {
                    trainingData.inputs.push(features);
                    trainingData.outputs.push(oneHotOutput);
                } else {
                    validationData.inputs.push(features);
                    validationData.outputs.push(oneHotOutput);
                }
            }

            // Add custom examples if any
            if (customExamples.length > 0) {
                customExamples.forEach(example => {
                    const date = new Date(example.date);
                    const year = date.getFullYear();
                    const month = date.getMonth() + 1;
                    const day = date.getDate();

                    const features = extractDateFeatures(year, month, day);

                    const oneHotOutput = new Array(7).fill(0);
                    oneHotOutput[example.dayOfWeek] = 1;

                    trainingData.inputs.push(features);
                    trainingData.outputs.push(oneHotOutput);
                });
            }

            document.getElementById('trainModelBtn').disabled = false;
            showResult('Enhanced training data generated successfully!', 'success');
        }

        // Extract enhanced features from date components
        function extractDateFeatures(year, month, day) {
            // Basic normalization
            const normalizedYear = (year - 1990) / (2030 - 1990);
            const normalizedMonth = (month - 1) / 11;
            const normalizedDay = (day - 1) / 30;

            // Cyclic encoding for month (captures the cyclic nature of months)
            const monthSin = Math.sin(2 * Math.PI * month / 12);
            const monthCos = Math.cos(2 * Math.PI * month / 12);

            // Cyclic encoding for day (captures the cyclic nature of days within a month)
            const daySin = Math.sin(2 * Math.PI * day / 31);
            const dayCos = Math.cos(2 * Math.PI * day / 31);

            // Leap year indicator
            const isLeapYear = ((year % 4 === 0) && (year % 100 !== 0)) || (year % 400 === 0) ? 1 : 0;

            // Day of year (1-366)
            const dayOfYear = getDayOfYear(year, month, day);
            const normalizedDayOfYear = (dayOfYear - 1) / 365;

            // Century indicator
            const century = Math.floor(year / 100);
            const normalizedCentury = (century - 19) / 4; // Normalize between 1990-2030

            // Year in century
            const yearInCentury = year % 100;
            const normalizedYearInCentury = yearInCentury / 100;

            return [
                normalizedYear,
                normalizedMonth,
                normalizedDay,
                monthSin,
                monthCos,
                daySin,
                dayCos,
                isLeapYear,
                normalizedDayOfYear,
                normalizedCentury,
                normalizedYearInCentury
            ];
        }

        // Calculate day of year (1-366)
        function getDayOfYear(year, month, day) {
            const date = new Date(year, month - 1, day);
            const start = new Date(year, 0, 0);
            const diff = date - start;
            return Math.floor(diff / (1000 * 60 * 60 * 24));
        }
        // Create the model based on selected architecture
        function createModel() {
            const modelType = document.getElementById('modelType').value;
            const learningRate = parseFloat(document.getElementById('learningRate').value);

            model = tf.sequential();

            // Input shape is now 11 features instead of 3
            const inputShape = [11];

            if (modelType === 'simple') {
                // Enhanced simple model
                model.add(tf.layers.dense({
                    units: 64,
                    activation: 'relu',
                    inputShape: inputShape
                }));
                model.add(tf.layers.dropout({ rate: 0.2 }));
                model.add(tf.layers.dense({
                    units: 32,
                    activation: 'relu'
                }));
            } else if (modelType === 'medium') {
                // Enhanced medium model
                model.add(tf.layers.dense({
                    units: 128,
                    activation: 'relu',
                    inputShape: inputShape
                }));
                model.add(tf.layers.dropout({ rate: 0.3 }));
                model.add(tf.layers.dense({
                    units: 64,
                    activation: 'relu'
                }));
                model.add(tf.layers.dropout({ rate: 0.2 }));
                model.add(tf.layers.dense({
                    units: 32,
                    activation: 'relu'
                }));
            } else if (modelType === 'complex') {
                // Enhanced complex model
                model.add(tf.layers.dense({
                    units: 256,
                    activation: 'relu',
                    inputShape: inputShape
                }));
                model.add(tf.layers.dropout({ rate: 0.4 }));
                model.add(tf.layers.dense({
                    units: 128,
                    activation: 'relu'
                }));
                model.add(tf.layers.dropout({ rate: 0.3 }));
                model.add(tf.layers.dense({
                    units: 64,
                    activation: 'relu'
                }));
                model.add(tf.layers.dropout({ rate: 0.2 }));
                model.add(tf.layers.dense({
                    units: 32,
                    activation: 'relu'
                }));
            }

            // Output layer
            model.add(tf.layers.dense({
                units: 7,
                activation: 'softmax'
            }));

            // Compile the model with a lower learning rate for better convergence
            model.compile({
                optimizer: tf.train.adam(learningRate),
                loss: 'categoricalCrossentropy',
                metrics: ['accuracy']
            });

            return model;
        }
        // Train the model
        async function trainModel() {
            if (isTraining) return;

            isTraining = true;
            document.getElementById('trainModelBtn').disabled = true;
            document.getElementById('generateDataBtn').disabled = true;
            document.getElementById('predictBtn').disabled = true;

            // Reset chart data
            trainingChart.data.labels = [];
            trainingChart.data.datasets[0].data = [];
            trainingChart.data.datasets[1].data = [];
            trainingChart.data.datasets[2].data = [];
            trainingChart.update();

            // Create or recreate the model
            createModel();

            // Convert data to tensors
            const xs = tf.tensor2d(trainingData.inputs);
            const ys = tf.tensor2d(trainingData.outputs);
            const valXs = tf.tensor2d(validationData.inputs);
            const valYs = tf.tensor2d(validationData.outputs);

            // Training parameters
            const epochs = parseInt(document.getElementById('epochs').value);
            const batchSize = parseInt(document.getElementById('batchSize').value);

            // Train the model
            await model.fit(xs, ys, {
                epochs: epochs,
                batchSize: batchSize,
                validationData: [valXs, valYs],
                callbacks: {
                    onEpochEnd: async (epoch, logs) => {
                        // Update progress bar
                        const progress = ((epoch + 1) / epochs) * 100;
                        document.getElementById('trainingProgress').style.width = `${progress}%`;
                        document.getElementById('progressText').textContent = `Epoch ${epoch + 1}/${epochs}`;

                        // Update metrics
                        document.getElementById('trainLoss').textContent = logs.loss.toFixed(4);
                        document.getElementById('valLoss').textContent = logs.val_loss.toFixed(4);
                        document.getElementById('accuracy').textContent = (logs.val_acc * 100).toFixed(2);

                        // Update chart
                        trainingChart.data.labels.push(epoch + 1);
                        trainingChart.data.datasets[0].data.push(logs.loss);
                        trainingChart.data.datasets[1].data.push(logs.val_loss);
                        trainingChart.data.datasets[2].data.push(logs.val_acc * 100);
                        trainingChart.update();

                        // Small delay to allow UI updates
                        await tf.nextFrame();
                    }
                }
            });

            // Clean up tensors
            xs.dispose();
            ys.dispose();
            valXs.dispose();
            valYs.dispose();

            // Enable buttons
            document.getElementById('trainModelBtn').disabled = false;
            document.getElementById('generateDataBtn').disabled = false;
            document.getElementById('predictBtn').disabled = false;
            isTraining = false;

            showResult('Model training completed!', 'success');
        }

        // Predict the day of the week for a given date
        async function predictDayOfWeek() {
            const dateInput = document.getElementById('dateInput').value;
            if (!dateInput) {
                showResult('Please enter a date', 'error');
                return;
            }

            const date = new Date(dateInput);
            const year = date.getFullYear();
            const month = date.getMonth() + 1;
            const day = date.getDate();

            // Normalize date components
            const normalizedYear = (year - 1990) / (2030 - 1990);
            const normalizedMonth = (month - 1) / 11;
            const normalizedDay = (day - 1) / 30;

            // Make prediction
            const input = tf.tensor2d([[normalizedYear, normalizedMonth, normalizedDay]]);
            const prediction = model.predict(input);
            const predictionValues = await prediction.data();

            // Find the day with the highest probability
            let maxProb = 0;
            let predictedDay = 0;
            for (let i = 0; i < 7; i++) {
                if (predictionValues[i] > maxProb) {
                    maxProb = predictionValues[i];
                    predictedDay = i;
                }
            }

            // Get actual day of week
            const actualDay = date.getDay();

            // Display result
            const resultDiv = document.getElementById('predictionResult');
            resultDiv.innerHTML = `
                <div class="result ${predictedDay === actualDay ? 'result-success' : 'result-error'}">
                    <p><strong>Predicted Day:</strong> ${daysOfWeek[predictedDay]}</p>
                    <p><strong>Actual Day:</strong> ${daysOfWeek[actualDay]}</p>
                    <p><strong>Confidence:</strong> ${(maxProb * 100).toFixed(2)}%</p>
                    <div class="confidence-bar">
                        <div class="confidence" style="width: ${maxProb * 100}%"></div>
                    </div>
                    <div style="margin-top: 10px;">
                        <strong>Probabilities:</strong>
                        ${predictionValues.map((val, idx) =>
                `<div>${daysOfWeek[idx]}: ${(val * 100).toFixed(2)}%</div>`
            ).join('')}
                    </div>
                </div>
            `;

            // Clean up tensors
            input.dispose();
            prediction.dispose();
        }

        // Add a custom training example
        function addCustomExample() {
            const dateInput = document.getElementById('customDate').value;
            const dayOfWeek = parseInt(document.getElementById('customDay').value);

            if (!dateInput) {
                showResult('Please enter a date', 'error');
                return;
            }

            // Verify the day of week is correct
            const date = new Date(dateInput);
            const actualDay = date.getDay();

            if (actualDay !== dayOfWeek) {
                showResult(`The selected date is actually a ${daysOfWeek[actualDay]}. Please correct your selection.`, 'error');
                return;
            }

            // Add to custom examples
            customExamples.push({
                date: dateInput,
                dayOfWeek: dayOfWeek
            });

            // Update the list
            updateCustomExamplesList();

            showResult('Example added successfully!', 'success');
        }

        // Update the custom examples list
        function updateCustomExamplesList() {
            const listDiv = document.getElementById('customExamplesList');

            if (customExamples.length === 0) {
                listDiv.innerHTML = '<p>No custom examples added yet.</p>';
                return;
            }

            listDiv.innerHTML = customExamples.map((example, index) => {
                const date = new Date(example.date);
                return `
                    <div class="training-example">
                        <span>${date.toLocaleDateString()} - ${daysOfWeek[example.dayOfWeek]}</span>
                        <button onclick="removeCustomExample(${index})" style="width: auto; padding: 5px 10px;">Remove</button>
                    </div>
                `;
            }).join('');
        }

        // Remove a custom example
        function removeCustomExample(index) {
            customExamples.splice(index, 1);
            updateCustomExamplesList();
        }

        // Clear all custom examples
        function clearCustomExamples() {
            customExamples = [];
            updateCustomExamplesList();
            showResult('All custom examples cleared', 'info');
        }

        // Show a result message
        function showResult(message, type) {
            const resultDiv = document.getElementById('predictionResult');
            resultDiv.innerHTML = `<div class="result result-${type}">${message}</div>`;

            // Auto-hide after 3 seconds
            setTimeout(() => {
                resultDiv.innerHTML = '';
            }, 3000);
        }
    </script>
</body>

</html>